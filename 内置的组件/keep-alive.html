<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>keep-alive</title>
</head>
<body>

<div id="mount-point"></div>


<!-- include å’Œ exclude å±æ€§å…è®¸ç»„ä»¶æœ‰æ¡ä»¶åœ°ç¼“å­˜ã€‚äºŒè€…éƒ½å¯ä»¥ç”¨é€—å·åˆ†éš”å­—ç¬¦ä¸²ã€æ­£åˆ™è¡¨è¾¾å¼æˆ–ä¸€ä¸ªæ•°ç»„æ¥è¡¨ç¤ºï¼š -->

    <!-- é€—å·åˆ†éš”å­—ç¬¦ä¸² -->
    <keep-alive include="a,b">
        <component :is="view"></component>
    </keep-alive>

    <!-- æ­£åˆ™è¡¨è¾¾å¼ (ä½¿ç”¨ `v-bind`) -->
    <keep-alive :include="/a|b/">
        <component :is="view"></component>
    </keep-alive>

    <!-- æ•°ç»„ (ä½¿ç”¨ `v-bind`) -->
    <keep-alive :include="['a', 'b']">
        <component :is="view"></component>
    </keep-alive>

<!-- åŒ¹é…é¦–å…ˆæ£€æŸ¥ç»„ä»¶è‡ªèº«çš„ name é€‰é¡¹ï¼Œå¦‚æœ name é€‰é¡¹ä¸å¯ç”¨ï¼Œåˆ™åŒ¹é…å®ƒçš„å±€éƒ¨æ³¨å†Œåç§° (çˆ¶ç»„ä»¶ components é€‰é¡¹çš„é”®å€¼)ã€‚åŒ¿åç»„ä»¶ä¸èƒ½è¢«åŒ¹é…ã€‚ -->

<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script>
    /*
    keep-alive  
    ğŸ™‚ Propsï¼š
        include - å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚åªæœ‰åŒ¹é…çš„ç»„ä»¶ä¼šè¢«ç¼“å­˜ã€‚
        exclude - å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ã€‚ä»»ä½•åŒ¹é…çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«ç¼“å­˜ã€‚
    ğŸ™‚ ç”¨æ³•ï¼š
        <keep-alive> åŒ…è£¹åŠ¨æ€ç»„ä»¶æ—¶ï¼Œä¼šç¼“å­˜ä¸æ´»åŠ¨çš„ç»„ä»¶å®ä¾‹ï¼Œè€Œä¸æ˜¯é”€æ¯å®ƒä»¬ã€‚å’Œ <transition> ç›¸ä¼¼ï¼Œ<keep-alive> æ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼šå®ƒè‡ªèº«ä¸ä¼šæ¸²æŸ“ä¸€ä¸ª DOM å…ƒç´ ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨çˆ¶ç»„ä»¶é“¾ä¸­ã€‚
        å½“ç»„ä»¶åœ¨ <keep-alive> å†…è¢«åˆ‡æ¢ï¼Œå®ƒçš„ activated å’Œ deactivated è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°å°†ä¼šè¢«å¯¹åº”æ‰§è¡Œã€‚

            åœ¨ 2.2.0 åŠå…¶æ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œactivated å’Œ deactivated å°†ä¼šåœ¨ <keep-alive> æ ‘å†…çš„æ‰€æœ‰åµŒå¥—ç»„ä»¶ä¸­è§¦å‘ã€‚
        ä¸»è¦ç”¨äºä¿ç•™ç»„ä»¶çŠ¶æ€æˆ–é¿å…é‡æ–°æ¸²æŸ“ã€‚

        æ³¨æ„ï¼Œ<keep-alive> æ˜¯ç”¨åœ¨å…¶ä¸€ä¸ªç›´å±çš„å­ç»„ä»¶è¢«å¼€å…³çš„æƒ…å½¢ã€‚å¦‚æœä½ åœ¨å…¶ä¸­æœ‰ v-for åˆ™ä¸ä¼šå·¥ä½œã€‚å¦‚æœæœ‰ä¸Šè¿°çš„å¤šä¸ªæ¡ä»¶æ€§çš„å­å…ƒç´ ï¼Œ<keep-alive> è¦æ±‚åŒæ—¶åªæœ‰ä¸€ä¸ªå­å…ƒç´ è¢«æ¸²æŸ“ã€‚

        include and exclude
        ç”¨æ³•è§ä¸Šé¢html
    â° 
    ğŸŒ°  ä¾‹å­å¦‚ä¸‹
    */

    var component1 = Vue.extend({
        data() {
            return {
                n: 0
            }
        },
        name: 'component1',
        template: '<h1>component1<button @click="n++">{{n}}</button></h1>'
    });
    var component2 = Vue.extend({
        data() {
            return {
                n: 0
            }
        },
        name: 'component2',
        template: '<h2>component2<button @click="n++">{{n}}</button></h2>'
    });
    var component3 = Vue.extend({
        name: 'component3',
        template: '<h3>component3</h3>'
    });

    new Vue({
        el: '#mount-point',
        data: {
            view: 'component1'
        },
        template: '<div>'
            + '<button @click="cut(component1)">component1</button>'
            + '<button @click="cut(component2)">component2</button>'
            + '<button @click="cut(component3)">component3</button>'
            + '<keep-alive include="component1">'
            + '<component v-bind:is="view"></component>'
            + '</keep-alive>'
            + '</div>',
        components: {
            component1,
            component2,
            component3
        },
        methods: {
            cut(com) {
                this.view = com;
            }
        }
    });
   

</script>
</body>
</html>