<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>el</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      .box {
        background: pink;
        height: 600px;
      }
      .loading {
        width: 100px;
        height: 100px;
        border-radius: 5px;
        background: rgba(0,0,0,0.5);
        position: fixed;
        left: 50%;
        top: 50%;
        margin-left: -50px;
        margin-top: -50px;
      }
    </style>
</head>
<body>
  <div id="app"></div>
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script>
    /*
    el

    ğŸ™‚ ç±»å‹
      String | HTMLElement
    â° é™åˆ¶
      åªåœ¨ç”± new åˆ›å»ºçš„å®ä¾‹ä¸­éµå®ˆã€‚
    ğŸ æä¾›ä¸€ä¸ªé¡µé¢ä¸Šå·²ç»å­˜åœ¨çš„DOMå…ƒç´ ä½œä¸ºVueå®ä¾‹çš„æŒ‚è½½ç›®æ ‡,
       å¯ä»¥ä½¿CSSé€‰æ‹©å™¨(å¯èƒ½ç”¨äº†querySelect/querySelectAll),
       å¯ä»¥æ˜¯ä¸€ä¸ª HTMLElement å®ä¾‹ã€‚(åŸç”ŸDOMå¯¹è±¡)

       åœ¨å®ä¾‹æŒ‚è½½ä¹‹åï¼Œå…ƒç´ å¯ä»¥ç”¨ vm.$el è®¿é—®ã€‚

       å¦‚æœè¿™ä¸ªé€‰é¡¹åœ¨å®ä¾‹åŒ–æ—¶æœ‰ä½œç”¨ï¼Œå®ä¾‹å°†ç«‹å³è¿›å…¥ç¼–è¯‘è¿‡ç¨‹ï¼Œå¦åˆ™ï¼Œéœ€è¦æ˜¾å¼è°ƒç”¨ vm.$mount() æ‰‹åŠ¨å¼€å¯ç¼–è¯‘ã€‚
    */

    //â° æ ¹æ®element loadingåŸç† å†™ä¸€ä¸ªç®€å•çš„loading, ä¸»è¦å­¦ä¹ elã€Vue.extend() 
    //    ä»¥åŠç»™VueåŸå‹æ·»åŠ æ·»åŠ å…¨å±€æ–¹æ³•($loading)å’Œç»™å­ç±»å®ä¾‹æ·»åŠ æ–¹æ³•(close)
    //    ç®€å•çš„äº†è§£äº†å¦‚ä½•ç»™Vueæ‰©å±•æ’ä»¶ï¼Œæ“ä½œå­ç±»å®ä¾‹

    var Loading = Vue.extend({
      el: document.createElement('div'),
      data() {
        return {
          text: 'åŠ è½½ä¸­Â·Â·Â·',
          visible: false
        }
      },
      template: '<div class="loading" v-if="visible">{{text}}</div>',
      methods: {
        
      }
    })

    Loading.prototype.close = function() {
      this.$el.parentNode.removeChild(this.$el);
      this.$destroy();
    }

    function loading() {
      var instance = new Loading();
      Vue.nextTick(() => {
        instance.visible = true;
      });
      var parent = document.body;
      parent.appendChild(instance.$el);
      return instance;
    }

    Vue.prototype.$loading = loading;

    let VM = new Vue({
      el: '#app',
      template: '<div class="box" @click="open"></div>',
      methods: {
        open() {
          var haha = this.$loading();
          setTimeout(function() {
            haha.close()
          }, 3000);
        }
      }
    })

    console.log(VM);

    //åˆ›å»ºstyleæ ‡ç­¾
    let Style = Vue.extend({
        el: document.createElement('div'),
        template: '<style>.mint-header,.mint-button--primary {background-color:{{baseColor}}} .mint-navbar .mint-tab-item.is-selected {border-bottom: 3px solid {{baseColor}};color: {{baseColor}};}</style>',
        data() {
          return {
            baseColor: 'red'
          }
        },
        created() {
          let n = 0;
          let that = this;
          let timer =  setInterval(function() {
            n++;
            that.change(n)
          }, 1000)
          if(n > 100) {
            clearInterval(timer);
          }
        },
        methods: {
          change(n) {
            this.$data.baseColor = 'yellow' + n;
          }
        }
    });

    let style = new Style();

    console.log(style)

    document.head.appendChild(style.$el);
</script>
</body>
</html>